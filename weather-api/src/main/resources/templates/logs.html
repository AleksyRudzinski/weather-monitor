<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Logs ‚Äî Weather Monitor</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">

</head>

<body>
<nav class="navbar nav-blur sticky-top">
    <div class="container py-2">
        <div class="d-flex align-items-center gap-2">
            <a class="text-decoration-none" th:href="@{/}">
                <span class="fs-4">üå§Ô∏è</span>
            </a>
            <div class="fw-semibold fs-5">Weather Monitor</div>
        </div>

        <div class="d-flex gap-2 align-items-center">
            <span class="badge text-bg-dark pill px-3 py-2">Logs</span>
            <a class="btn btn-outline-primary" th:href="@{/}">‚Üê Dashboard</a>
        </div>
    </div>
</nav>

<main class="container my-4">

    <!-- toast / alert po wyczyszczeniu -->
    <div th:if="${toastSuccess}" class="alert alert-success shadow-sm" th:text="${toastSuccess}"></div>

    <div class="d-flex justify-content-between align-items-end mb-3">
        <div>
            <div class="fw-semibold fs-3">Log viewer</div>
            <div class="text-muted">Ostatnie linie z pliku log√≥w</div>
        </div>

        <div class="d-flex gap-2 flex-wrap justify-content-end">
            <!-- refresh + lines -->
            <form class="d-flex gap-2" method="get" th:action="@{/ui/logs}">
                <select name="lines" class="form-select" style="max-width: 140px;">
                    <option value="100" th:selected="${lines == 100}">100</option>
                    <option value="200" th:selected="${lines == 200}">200</option>
                    <option value="400" th:selected="${lines == 400}">400</option>
                    <option value="800" th:selected="${lines == 800}">800</option>
                </select>
                <button class="btn btn-primary" type="submit">Od≈õwie≈º</button>
            </form>

            <!-- Clear -->
            <form method="post"
                  th:action="@{/ui/logs/clear(lines=${lines})}"
                  onsubmit="return confirm('Na pewno wyczy≈õciƒá logi?');">
                <button class="btn btn-outline-danger" type="submit">Wyczy≈õƒá</button>
            </form>

            <!-- API -->
            <a class="btn btn-soft" th:href="@{/api/logs(lines=${lines})}" target="_blank">API</a>

        </div>
    </div>

    <div class="card-soft p-3">
        <div class="logbox mono" th:text="${content}">logs...</div>
    </div>

    <div class="text-center text-muted mt-4">
        Weather Monitor ‚Äî Spring Boot + Thymeleaf ¬∑ Logs
    </div>

</main>
</body>
</html>
